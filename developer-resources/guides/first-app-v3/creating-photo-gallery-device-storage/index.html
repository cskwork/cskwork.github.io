<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v0.0.0-4192">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-TKMGCBC",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
<link rel="search" type="application/opensearchdescription+xml" title="workerRabbit" href="/docs/opensearch.xml"><title data-react-helmet="true">Creating a Photo Gallery with Device Storage | workerRabbit</title><meta data-react-helmet="true" property="og:url" content="https://velog.io/@csk917work/docs/developer-resources/guides/first-app-v3/creating-photo-gallery-device-storage"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="og:image" content="https://velog.velcdn.com/images/csk917work/profile/a8dd9a56-1e38-417b-833f-ec12bd72b998/image.png"><meta data-react-helmet="true" name="twitter:image" content="https://velog.velcdn.com/images/csk917work/profile/a8dd9a56-1e38-417b-833f-ec12bd72b998/image.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="twitter:domain" content="ionicframework.com"><meta data-react-helmet="true" name="twitter:site" content="@ionicframework"><meta data-react-helmet="true" name="twitter:creator" content="ionicframework"><meta data-react-helmet="true" name="fb:page_id" content="1321836767955949"><meta data-react-helmet="true" name="og:type" content="website"><meta data-react-helmet="true" name="og:site_name" content="Ionic Framework Docs"><meta data-react-helmet="true" property="og:title" content="Creating a Photo Gallery with Device Storage | workerRabbit"><meta data-react-helmet="true" name="description" content="Last time, we successfully added the Camera plugin to the About page of our Tabs app. Currently, the photo is replaced each time a new one is taken. What if we wanted to display multiple photos together? Let’s create a photo gallery. You can follow along with the complete code for this in the part 2 folder on GitHub."><meta data-react-helmet="true" property="og:description" content="Last time, we successfully added the Camera plugin to the About page of our Tabs app. Currently, the photo is replaced each time a new one is taken. What if we wanted to display multiple photos together? Let’s create a photo gallery. You can follow along with the complete code for this in the part 2 folder on GitHub."><link data-react-helmet="true" rel="shortcut icon" href="https://velog.velcdn.com/images/csk917work/profile/a8dd9a56-1e38-417b-833f-ec12bd72b998/image.png"><link data-react-helmet="true" rel="canonical" href="https://velog.io/@csk917work/docs/developer-resources/guides/first-app-v3/creating-photo-gallery-device-storage"><link data-react-helmet="true" rel="alternate" href="https://velog.io/@csk917work/docs/developer-resources/guides/first-app-v3/creating-photo-gallery-device-storage" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://velog.io/@csk917work/docs/ja/developer-resources/guides/first-app-v3/creating-photo-gallery-device-storage" hreflang="ja"><link data-react-helmet="true" rel="alternate" href="https://velog.io/@csk917work/docs/developer-resources/guides/first-app-v3/creating-photo-gallery-device-storage" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://O9QSL985BS-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/docs/assets/css/styles.2d31acc6.css">
<link rel="preload" href="/docs/assets/js/runtime~main.e3a12ff3.js" as="script">
<link rel="preload" href="/docs/assets/js/main.6abc1279.js" as="script">
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKMGCBC" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"></a><a class="navbar__item navbar__link" href="/docs/">Guide</a></div><div class="navbar__items navbar__items--right"><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_3AUJ"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"></a><a class="navbar__item navbar__link" href="/docs/">Guide</a></div><div class="navbar__items navbar__items--right"><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><main class="docMainContainer_2AUC docMainContainerEnhanced_27Ec"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2rXS"><div class="docItemContainer_1EXp"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->v7</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_Ftrd"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Creating a Photo Gallery with Device Storage</h1></header><p>Last time, we successfully added the Camera plugin to the About page of our Tabs app. Currently, the photo is replaced each time a new one is taken. What if we wanted to display multiple photos together? Let’s create a photo gallery. You can follow along with the complete code for this in <a href="https://github.com/ionic-team/photo-gallery-tutorial-ionic3/tree/master/part2" target="_blank" rel="noopener noreferrer">the part 2 folder</a> on GitHub.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="creating-a-dedicated-photo-service">Creating a Dedicated Photo Service<a aria-hidden="true" class="hash-link" href="#creating-a-dedicated-photo-service" title="Direct link to heading">​</a></h2><p>From a terminal window, navigate to your Ionic project and run:</p><div class="codeBlockContainer_K1bP language-shell"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">ionic g provider PhotoProvider</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This creates a PhotoProvider class in a dedicated providers/photo folder:</p><div class="codeBlockContainer_K1bP language-Javascript"><div class="codeBlockContent_hGly Javascript"><pre tabindex="0" class="prism-code language-Javascript codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">import { HttpClient } from &#x27;@angular/common/http&#x27;;</span><br></span><span class="token-line"><span class="token plain">import { Injectable } from &#x27;@angular/core&#x27;;</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">/*</span><br></span><span class="token-line"><span class="token plain">  Generated class for the PhotoProvider provider.</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  See https://angular.io/guide/dependency-injection for more info on providers</span><br></span><span class="token-line"><span class="token plain">  and Angular DI.</span><br></span><span class="token-line"><span class="token plain">*/</span><br></span><span class="token-line"><span class="token plain">@Injectable()</span><br></span><span class="token-line"><span class="token plain">export class PhotoProvider {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  constructor(public http: HttpClient) {</span><br></span><span class="token-line"><span class="token plain">    console.log(&#x27;Hello PhotoProvider Provider&#x27;);</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Within this class, add a Photo class. The “data” property represents the base64 image data of a captured photo:</p><div class="codeBlockContainer_K1bP language-Javascript"><div class="codeBlockContent_hGly Javascript"><pre tabindex="0" class="prism-code language-Javascript codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">class Photo {</span><br></span><span class="token-line"><span class="token plain">  data: any;</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Then, create a Photos array to represent our photo gallery:</p><div class="codeBlockContainer_K1bP language-Javascript"><div class="codeBlockContent_hGly Javascript"><pre tabindex="0" class="prism-code language-Javascript codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">export class PhotoProvider {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  public photos: Photo[] = [];</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  constructor() { }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Back in <code>about.ts</code>, import PhotoProvider:</p><div class="codeBlockContainer_K1bP language-Javascript"><div class="codeBlockContent_hGly Javascript"><pre tabindex="0" class="prism-code language-Javascript codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">import { PhotoProvider } from &#x27;../../providers/photo/photo&#x27;;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Add it to the Constructor:</p><div class="codeBlockContainer_K1bP language-Javascript"><div class="codeBlockContent_hGly Javascript"><pre tabindex="0" class="prism-code language-Javascript codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">constructor(private camera: Camera, public photoService: PhotoProvider) {  }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Next, move all code pertaining to the Camera plugin to the PhotoService class. This includes the takePicture method, the Camera import, and the About page constructor. Also, remove references to HttpClient - we won’t be making any HTTP calls.</p><p>Continuing on, we need to convert currentImage variable references to the new photos array. Start by adding the captured photo data into the photos array:</p><div class="codeBlockContainer_K1bP language-Javascript"><div class="codeBlockContent_hGly Javascript"><pre tabindex="0" class="prism-code language-Javascript codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">this.camera.getPicture(options).then((imageData) =&gt; {</span><br></span><span class="token-line"><span class="token plain">    // Add new photo to gallery</span><br></span><span class="token-line"><span class="token plain">    this.photos.unshift({</span><br></span><span class="token-line"><span class="token plain">        data: &#x27;data:image/jpeg;base64,&#x27; + imageData</span><br></span><span class="token-line"><span class="token plain">    }); }, (err) =&gt; {</span><br></span><span class="token-line"><span class="token plain">    // Handle error</span><br></span><span class="token-line"><span class="token plain">    console.log(&quot;Camera issue: &quot; + err);</span><br></span><span class="token-line"><span class="token plain">});</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In <code>about.page.ts</code>, remove the currentImage variable and the reference to Camera in the constructor, leaving only PhotoService:</p><div class="codeBlockContainer_K1bP language-Javascript"><div class="codeBlockContent_hGly Javascript"><pre tabindex="0" class="prism-code language-Javascript codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">export class AboutPage {</span><br></span><span class="token-line"><span class="token plain">  constructor(public navCtrl: NavController, public photoService: PhotoProvider) {  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Next, in <code>about.page.html</code>, remove the currentImage img tag. In its place, use an ion-grid component, which provides a great way to arrange elements on a page. In this case, we’ll use it to display 2 photos per row.</p><div class="codeBlockContainer_K1bP language-html"><div class="codeBlockContent_hGly html"><pre tabindex="0" class="prism-code language-html codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">ion-grid</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;</span><span class="token tag">ion-row</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token tag punctuation">&lt;</span><span class="token tag">ion-col</span><span class="token tag"> </span><span class="token tag attr-name">col-6</span><span class="token tag"> </span><span class="token tag attr-name">*ngFor</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">let photo of photoService.photos</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token tag punctuation">&lt;</span><span class="token tag">img</span><span class="token tag"> </span><span class="token tag attr-name">[src]</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">photo.data</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token tag punctuation">&lt;/</span><span class="token tag">ion-col</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;/</span><span class="token tag">ion-row</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">ion-grid</span><span class="token tag punctuation">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Here, we loop through each photo in the PhotoServices photos array, adding a new column for each. Since an ion-row consists of 12 “blocks” of space, and we’re setting the size to 6 (“col-6”), only 2 photos are displayed per row.</p><p>Last, update the Fab button to call the PhotoProvider’s <code>takePicture</code> method:</p><div class="codeBlockContainer_K1bP language-Html"><div class="codeBlockContent_hGly Html"><pre tabindex="0" class="prism-code language-Html codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">&lt;button ion-fab (click)=&quot;photoService.takePicture()&quot;&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Excellent! We now have a basic photo gallery working.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="saving-photos-to-the-device">Saving photos to the device<a aria-hidden="true" class="hash-link" href="#saving-photos-to-the-device" title="Direct link to heading">​</a></h2><p>Having a working photo gallery is pretty cool, but you’ll likely notice that when the app is closed, the photos are lost forever. That’s no good, so let’s add the Ionic Storage plugin, as easy way to store key/value pairs and JSON objects. When running in a native app context, Storage will prioritize using SQLite, one of the most stable and widely used file-based databases. When running on the web or as a Progressive Web App, Storage will attempt to use IndexedDB, WebSQL, and localstorage, in that order.</p><p>The Storage plugin works perfectly for our base64 image data. To begin, add the SQLite plugin for native:</p><div class="codeBlockContainer_K1bP language-shell"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">ionic cordova plugin </span><span class="token function">add</span><span class="token plain"> cordova-sqlite-storage</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Next, add the JavaScript library for the web:</p><div class="codeBlockContainer_K1bP language-shell"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token function">npm</span><span class="token plain"> </span><span class="token function">install</span><span class="token plain"> --save @ionic/storage</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Last, import the Storage module and add it to the imports list in <code>app.module.ts</code>:</p><div class="codeBlockContainer_K1bP language-Javascript"><div class="codeBlockContent_hGly Javascript"><pre tabindex="0" class="prism-code language-Javascript codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">import { IonicStorageModule } from &#x27;@ionic/storage&#x27;;</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">imports: [</span><br></span><span class="token-line"><span class="token plain">    BrowserModule,</span><br></span><span class="token-line"><span class="token plain">    IonicModule.forRoot(MyApp),</span><br></span><span class="token-line"><span class="token plain">    IonicStorageModule.forRoot()</span><br></span><span class="token-line"><span class="token plain">  ],</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It’s now ready to be used in our PhotoProvider class. Import it:</p><div class="codeBlockContainer_K1bP language-Javascript"><div class="codeBlockContent_hGly Javascript"><pre tabindex="0" class="prism-code language-Javascript codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">import { Storage } from &#x27;@ionic/storage-angular&#x27;;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Then inject it via the constructor:</p><div class="codeBlockContainer_K1bP language-Javascript"><div class="codeBlockContent_hGly Javascript"><pre tabindex="0" class="prism-code language-Javascript codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">constructor(private camera: Camera, private storage: Storage) { }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To add the capability to save photos, there’s only a couple steps left. Update the <code>takePicture()</code> method to save the entire photos array after each photo is taken using the storage.set method:</p><div class="codeBlockContainer_K1bP language-Javascript"><div class="codeBlockContent_hGly Javascript"><pre tabindex="0" class="prism-code language-Javascript codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">this.camera.getPicture(options).then((imageData) =&gt; {</span><br></span><span class="token-line"><span class="token plain">      // Add new photo to gallery</span><br></span><span class="token-line"><span class="token plain">      this.photos.unshift({</span><br></span><span class="token-line"><span class="token plain">        data: &#x27;data:image/jpeg;base64,&#x27; + imageData</span><br></span><span class="token-line"><span class="token plain">      });</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">      // Save all photos for later viewing</span><br></span><span class="token-line"><span class="token plain">      this.storage.set(&#x27;photos&#x27;, this.photos);</span><br></span><span class="token-line"><span class="token plain">    }, (err) =&gt; {</span><br></span><span class="token-line"><span class="token plain">     // Handle error</span><br></span><span class="token-line"><span class="token plain">     console.log(&quot;Camera issue: &quot; + err);</span><br></span><span class="token-line"><span class="token plain">    });</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We still need to load the saved photos when the app is first opened. This is simple enough - retrieve the “photos” key then assign its value to the photos array:</p><div class="codeBlockContainer_K1bP language-Javascript"><div class="codeBlockContent_hGly Javascript"><pre tabindex="0" class="prism-code language-Javascript codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">loadSaved() {</span><br></span><span class="token-line"><span class="token plain">    this.storage.get(&#x27;photos&#x27;).then((photos) =&gt; {</span><br></span><span class="token-line"><span class="token plain">      this.photos = photos || [];</span><br></span><span class="token-line"><span class="token plain">    });</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Over in the About page, call the loadSaved method once it begins loading:</p><div class="codeBlockContainer_K1bP language-Javascript"><div class="codeBlockContent_hGly Javascript"><pre tabindex="0" class="prism-code language-Javascript codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token plain">ngOnInit() {</span><br></span><span class="token-line"><span class="token plain">    this.photoService.loadSaved();</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Sweet! Photos are now saved to your device. To demonstrate that they are indeed being saved, force close DevApp, reopen it, and open the About page. Or, shake your device to have the Control Menu pop up, then tap “Exit preview.” Afterwards, reload this app to view the photos.</p><p>Finally, back up your changes to Appflow:</p><div class="codeBlockContainer_K1bP language-shell"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><code class="codeBlockLines_39YC"><span class="token-line"><span class="token function">git</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token function">git</span><span class="token plain"> commit -m “implemented photo gallery”</span><br></span><span class="token-line"><span class="token plain"></span><span class="token function">git</span><span class="token plain"> push ionic master</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Next up, we’ll look at how to apply a custom theme to an Ionic app.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ionic-team/ionic-docs/edit/main/docs/developer-resources/guides/first-app-v3/creating-photo-gallery-device-storage.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-edit iconEdit_nn1O"><path d="M7 0C3.13438 0 0 3.21563 0 7.17813C0 10.35 2.00625 13.0375 4.7875 13.9875C4.83125 13.9969 4.86875 14 4.90625 14C5.16563 14 5.26562 13.8094 5.26562 13.6438C5.26562 13.4719 5.25938 13.0219 5.25625 12.4219C4.99375 12.4812 4.75938 12.5063 4.55 12.5063C3.20313 12.5063 2.89687 11.4594 2.89687 11.4594C2.57812 10.6313 2.11875 10.4094 2.11875 10.4094C1.50938 9.98125 2.11562 9.96875 2.1625 9.96875H2.16563C2.86875 10.0312 3.2375 10.7125 3.2375 10.7125C3.5875 11.325 4.05625 11.4969 4.475 11.4969C4.80312 11.4969 5.1 11.3906 5.275 11.3094C5.3375 10.8469 5.51875 10.5312 5.71875 10.35C4.16563 10.1688 2.53125 9.55313 2.53125 6.80312C2.53125 6.01875 2.80312 5.37813 3.25 4.87813C3.17812 4.69688 2.9375 3.96563 3.31875 2.97813C3.31875 2.97813 3.36875 2.9625 3.475 2.9625C3.72812 2.9625 4.3 3.05937 5.24375 3.71562C5.80312 3.55625 6.4 3.47812 6.99687 3.475C7.59062 3.47812 8.19063 3.55625 8.75 3.71562C9.69375 3.05937 10.2656 2.9625 10.5188 2.9625C10.625 2.9625 10.675 2.97813 10.675 2.97813C11.0563 3.96563 10.8156 4.69688 10.7437 4.87813C11.1906 5.38125 11.4625 6.02187 11.4625 6.80312C11.4625 9.55937 9.825 10.1656 8.26562 10.3438C8.51562 10.5656 8.74063 11.0031 8.74063 11.6719C8.74063 12.6313 8.73125 13.4062 8.73125 13.6406C8.73125 13.8094 8.82812 14 9.0875 14C9.125 14 9.16875 13.9969 9.2125 13.9875C11.9969 13.0375 14 10.3469 14 7.17813C14 3.21563 10.8656 0 7 0Z" fill="currentColor"></path></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div><div class="spacer"></div></div><div class="end"><div class="toc-wrapper"><h2>Contents</h2><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creating-a-dedicated-photo-service" class="table-of-contents__link toc-highlight">Creating a Dedicated Photo Service</a></li><li><a href="#saving-photos-to-the-device" class="table-of-contents__link toc-highlight">Saving photos to the device</a></li></ul></div></div></div></div></div></main></div></div></div></div>
<script src="/docs/assets/js/runtime~main.e3a12ff3.js"></script>
<script src="/docs/assets/js/main.6abc1279.js"></script>
</body>
</html>